"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5189],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return d}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=r.createContext({}),l=function(e){var n=r.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},u=function(e){var n=l(e.components);return r.createElement(o.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,o=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),m=l(t),d=a,f=m["".concat(o,".").concat(d)]||m[d]||p[d]||s;return t?r.createElement(f,c(c({ref:n},u),{},{components:t})):r.createElement(f,c({ref:n},u))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,c=new Array(s);c[0]=m;var i={};for(var o in n)hasOwnProperty.call(n,o)&&(i[o]=n[o]);i.originalType=e,i.mdxType="string"==typeof e?e:a,c[1]=i;for(var l=2;l<s;l++)c[l]=t[l];return r.createElement.apply(null,c)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},7816:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return o},default:function(){return d},frontMatter:function(){return i},metadata:function(){return l},toc:function(){return p}});var r=t(7462),a=t(3366),s=(t(7294),t(3905)),c=["components"],i={title:"\u77ed\u4fe1\u670d\u52a1",sidebar_label:"\u77ed\u4fe1\u670d\u52a1"},o=void 0,l={unversionedId:"aliyun/ali-sms",id:"aliyun/ali-sms",title:"\u77ed\u4fe1\u670d\u52a1",description:"\u67e5\u770b\u5b98\u65b9SDK",source:"@site/docs/aliyun/ali-sms.md",sourceDirName:"aliyun",slug:"/aliyun/ali-sms",permalink:"/docs/aliyun/ali-sms",tags:[],version:"current",frontMatter:{title:"\u77ed\u4fe1\u670d\u52a1",sidebar_label:"\u77ed\u4fe1\u670d\u52a1"},sidebar:"Extends",next:{title:"\u5bf9\u8c61\u5b58\u50a8 OSS",permalink:"/docs/aliyun/ali-oss"}},u={},p=[],m={toc:p};function d(e){var n=e.components,t=(0,a.Z)(e,c);return(0,s.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,s.kt)("p",null,(0,s.kt)("a",{parentName:"p",href:"https://help.aliyun.com/document_detail/215762.html?spm=a2c4g.11186623.6.661.49292e844fdVPQ"},"\u67e5\u770b\u5b98\u65b9SDK")),(0,s.kt)("p",null,"\u5b89\u88c5"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-shell"},"composer require alibabacloud/darabonba-openapi\ncomposer require alibabacloud/dysmsapi-20170525\n")),(0,s.kt)("p",null,"\u4f7f\u7528"),(0,s.kt)("details",null,(0,s.kt)("summary",null," **\u5c55\u5f00\u67e5\u770b\u6e90\u7801** "),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-php"},'<?php\n/**\n* @Descripttion:\n* @Author: ovim <ovimcloud@gmail.com>\n*/\n\nnamespace App\\Services;\n\nuse AlibabaCloud\\SDK\\Dysmsapi\\V20170525\\Dysmsapi;\n\nuse Darabonba\\OpenApi\\Models\\Config;\nuse AlibabaCloud\\SDK\\Dysmsapi\\V20170525\\Models\\SendSmsRequest;\n\n/**\n* Class AliSmsService\n* @package App\\Services\n*/\nclass AliSmsService extends BaseService\n{\n  /**\n   * \u4f7f\u7528AK&SK\u521d\u59cb\u5316\u8d26\u53f7Client\n   *\n   * @param string $accessKeyId\n   * @param string $accessKeySecret\n   * @return Dysmsapi Client\n   */\n  public static function createClient(string $accessKeyId, string $accessKeySecret): Dysmsapi\n  {\n      $config = new Config([\n          // \u60a8\u7684AccessKey ID\n          "accessKeyId" => $accessKeyId,\n          // \u60a8\u7684AccessKey Secret\n          "accessKeySecret" => $accessKeySecret\n      ]);\n      // \u8bbf\u95ee\u7684\u57df\u540d\n      $config->endpoint = "dysmsapi.aliyuncs.com";\n      return new Dysmsapi($config);\n  }\n\n  /**\n   * \u53d1\u9001\u77ed\u4fe1\u9a8c\u8bc1\u7801\uff08\u5355\u4e2a\uff09\n   *\n   * @param string $phoneNumbers \u624b\u673a\u53f7\n   * @param string $code \u9a8c\u8bc1\u7801\n   * @return bool\n   */\n  public function sendSms(string $phoneNumbers, string $code): bool {\n\n      if (empty($code)) return false;\n\n      $client = self::createClient("accessKeyId", "accessKeySecret");\n      $sendSmsRequest = new SendSmsRequest([\n          "phoneNumbers" => $phoneNumbers,\n          "signName" => "\u77ed\u4fe1\u7b7e\u540d",\n          "templateCode" => "\u6a21\u7248ID",\n          "templateParam" => json_encode([\n              \'code\' => $code\n          ])\n      ]);\n      // \u590d\u5236\u4ee3\u7801\u8fd0\u884c\u8bf7\u81ea\u884c\u6253\u5370 API \u7684\u8fd4\u56de\u503c\n      $result = $client->sendSms($sendSmsRequest);\n\n      if ($result->body->code == \'OK\') {\n          return true;\n      }\n\n      return false;\n  }\n}\n\n'))))}d.isMDXComponent=!0}}]);